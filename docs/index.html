<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>mwbot-ts - v1.2.6</title><meta name="description" content="Documentation for mwbot-ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">mwbot-ts - v1.2.6</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>mwbot-ts - v1.2.6</h1></div><div class="tsd-panel tsd-typography"><h1 id="mwbot-ts" class="tsd-anchor-link">mwbot-ts<a href="#mwbot-ts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.com/package/mwbot-ts"><img src="https://img.shields.io/npm/v/mwbot-ts.svg" alt="npm version"></a>
<a href="https://github.com/Dr4goniez/mwbot-ts"><img src="https://img.shields.io/github/license/Dr4goniez/mwbot-ts" alt="GitHub License"></a>
<img src="https://img.shields.io/node/v/mwbot-ts" alt="node-current">
<img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome"></p>
<p><a href="https://github.com/Dr4goniez/mwbot-ts">üêô GitHub</a> - <a href="https://www.npmjs.com/package/mwbot-ts">üì¶ npm</a> - <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html">üìò API Documentation</a></p>
<p><em>In code examples in this guide and the API documentation, <code>Mwbot</code> refers to the <strong>class</strong>, while the lowercase <code>mwbot</code> refers to an <strong>instance</strong> of the class.</em></p>
<hr>
<p><strong>mwbot-ts</strong> is a MediaWiki bot framework for Node.js that works with both JavaScript and TypeScript. It offers a highly customizable core class and a bot-friendly wikitext parser for common operations. Portions of the source code are adapted from <a href="https://github.com/gesinn-it-pub/mwbot">mwbot</a>, <a href="https://github.com/siddharthvp/mwn">mwn</a>, <a href="https://github.com/wikimedia-gadgets/types-mediawiki">types-mediawiki</a>, and <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/+/refs/heads/master">MediaWiki core</a>.</p>
<p><strong>Main features</strong>:</p>
<ul>
<li>Supports all core authentication methods: <code>OAuth 2.0</code>, <code>OAuth 1.0a</code>, and <code>BotPasswords</code>. Anonymous access is also supported for non-write requests.</li>
<li>Uses <a href="https://axios-http.com/">Axios</a> to perform HTTP requests, with responses automatically normalized to a consistent JSON format (<code>{&quot;formatversion&quot;: &quot;2&quot;}</code> is enabled by default). For full control, the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#rawrequest"><code>rawRequest</code></a> method is also available.</li>
<li>Automatically handles common MediaWiki API complexities, such as converting boolean values into a PHP-compatible format, optimizing request headers to reduce bandwidth usage, managing the <code>maxlag</code> parameter for server load (default: 5 seconds), and retrying failed HTTP requests under appropriate conditions. See also <a href="https://www.mediawiki.org/wiki/API:Data_formats">mw:API:Data formats</a> and <a href="https://www.mediawiki.org/wiki/API:Etiquette">mw:API:Etiquette</a>.</li>
<li>Fetches and caches edit tokens automatically. POST requests for database <em>write</em> operations can be made via <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#postwithtoken"><code>postWithToken</code></a> or <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#postwithcsrftoken"><code>postWithCsrfToken</code></a>, which closely mirror the functionality of MediaWiki‚Äôs built-in <code>mediawiki.Api</code> module.</li>
<li>Manages intervals between write requests automatically. By default, the framework enforces at least a 5-second gap between successful <code>action=edit</code>, <code>action=move</code>, and <code>action=upload</code> requests, relieving clients of manual throttling.</li>
<li>Built around an extensible core class, <code>Mwbot</code>, which is designed to be subclassed ‚Äî making it easy to implement shared logic, custom workflows, or application-specific behavior.</li>
<li>Handles HTTP request errors in a unified manner via the <a href="#error-handling">MwbotError</a> class, with <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/MwbotError.MwbotErrorCodes.html">all internal error codes documented</a> for easy debugging.</li>
<li>Provides an intuitive wikitext parser for common bot operations, such as modifying template parameters and replacing wikilink targets. This functionality is centralized in the <a href="#wikitext-parser">Wikitext</a> class.</li>
<li><a href="https://github.com/Dr4goniez/dragobot">A production bot running on Japanese Wikipedia</a> is available as a reference implementation of this framework.</li>
</ul>
<p>To install the package, run:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">mwbot-ts</span>
</code><button type="button">Copy</button></pre>

<p><a href="https://nodei.co/npm/mwbot-ts/"><img src="https://nodei.co/npm/mwbot-ts.png?downloads=true&amp;downloadRank=true" alt="Download stats"></a></p>
<details>
<summary><big><b>Table of contents:</b></big></summary>
<ol>
<li><a href="#the-core-class">The core class</a>
<ol>
<li><a href="#create-an-instance">Create an instance</a></li>
<li><a href="#request-methods">Request methods</a>
<ol>
<li><a href="#basic-request-methods">Basic request methods</a></li>
<li><a href="#utility-request-methods">Utility request methods</a></li>
<li><a href="#token-related-methods">Token-related methods</a></li>
<li><a href="#edit-related-methods">Edit-related methods</a></li>
<li><a href="#other-utility-methods">Other utility methods</a></li>
</ol>
</li>
<li><a href="#extend-the-class">Extend the class</a></li>
</ol>
</li>
<li><a href="#error-handling">Error handling</a></li>
<li><a href="#wikitext-parser">Wikitext parser</a></li>
<li><a href="#other-classes-and-accessors">Other classes and accessors</a>
<ol>
<li><a href="#mwbottitle">mwbot.Title</a></li>
<li><a href="#mwbotconfig">mwbot.config</a></li>
<li><a href="#mwbotutil">Mwbot.Util</a></li>
<li><a href="#mwbotstring">Mwbot.String</a></li>
<li><a href="#template-related-classes">Template-related classes</a></li>
<li><a href="#wikilink-related-classes">Wikilink-related classes</a></li>
</ol>
</li>
</ol>
</details>
<h2 id="the-core-class" class="tsd-anchor-link">The core class<a href="#the-core-class" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>mwbot-ts</code> exports three primary values (along with several types and interfaces):</p>
<ul>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html">Mwbot</a> - The core class, which centralizes all auxiliary functionality.</li>
<li><a href="#error-handling">MwbotError</a> - A class for standardized error handling.</li>
<li><code>MWBOT_VERSION</code> - A constant that stores the package version.</li>
</ul>
<h3 id="create-an-instance" class="tsd-anchor-link">Create an instance<a href="#create-an-instance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To create a new <code>Mwbot</code> instance, use the static method <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#init">Mwbot.init</a>. This method serves as the entry point for all initialization processes: It sets the API endpoint, defines default request parameters, validates login credentials or OAuth consumer secrets, fetches the site's metadata, and prepares all site-info-dependent auxiliary classes.</p>
<details>
<summary>Mwbot.init:</summary>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Mwbot</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mwbot-ts&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Mwbot</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">initOptions</span><span class="hl-1">, </span><span class="hl-4">defaultRequestOptions</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-4">mwbot</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// Use `mwbot` for your purposes...</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</details>
<p>The <code>Mwbot.init</code> method requires a <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.MwbotInitOptions.html">MwbotInitOptions</a> object, which consists of <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.MwbotOptions.html">MwbotOptions</a> and <a href="https://dr4goniez.github.io/mwbot-ts/types/Mwbot.Credentials.html">Credentials</a>. This object is used to initialize default instance options and authentication credentials:</p>
<details>
<summary>MwbotInitOptions:</summary>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Mwbot</span><span class="hl-1">, </span><span class="hl-4">MwbotInitOptions</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mwbot-ts&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">initOptions</span><span class="hl-1">: </span><span class="hl-8">MwbotInitOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * The API endpoint. This property is required.</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-4">apiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;https://en.wikipedia.org/w/api.php&#39;</span><span class="hl-1">, </span><span class="hl-6">// Required</span><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * User agent for the application. Typed as optional, but should always be included</span><br/><span class="hl-6">   * per https://www.mediawiki.org/wiki/API:Etiquette#The_User-Agent_header</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-4">userAgent:</span><span class="hl-1"> </span><span class="hl-2">&#39;MyCoolBot/1.0.0 (https://github.com/Foo/MyCoolBot)&#39;</span><span class="hl-1">, </span><span class="hl-6">// Example</span><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Default interval (in milliseconds) between specific actions.</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-9">5000</span><span class="hl-1">, </span><span class="hl-6">// Defaults to 5 seconds; optional</span><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * API actions between which to enforce an interval.</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-4">intervalActions:</span><span class="hl-1"> [</span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;move&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;upload&#39;</span><span class="hl-1">], </span><span class="hl-6">// Defaults to these 3; optional</span><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Whether to suppress warnings returned by the API.</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-4">suppressWarnings:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">, </span><span class="hl-6">// Defaults to false</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// One of the following must be provided for authentification:</span><br/><span class="hl-1">  </span><span class="hl-4">credentials:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">oAuth2AccessToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your OAuth 2.0 access token&#39;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">credentials:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">consumerToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your OAuth 1.0a consumer token&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">consumerSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your OAuth 1.0a consumer secret&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">accessToken:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your OAuth 1.0a access token&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">accessSecret:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your OAuth 1.0a access secret&#39;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">credentials:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">username:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your bot username&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">password:</span><span class="hl-1"> </span><span class="hl-2">&#39;Your bot password&#39;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">credentials:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">anonymous:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> </span><span class="hl-6">// For anonymous access; the client will be limited to non-write requests</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-4">Mwbot</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">initOptions</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-4">mwbot</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// Use `mwbot` for your purposes...</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</details>
<p>For full flexibility, <code>MwbotOptions</code> can later be updated using the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#setmwbotoptions">setMwbotOptions</a> method. However, altering <code>apiUrl</code> after initialization is not recommended, as <code>mwbot</code> instances depend on site-specific metadata. As a best practice, limit the use of this method to updating interval-related options, and consider creating a new instance instead.</p>
<p>The second argument of <code>Mwbot.init</code> is a <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.MwbotRequestConfig.html">MwbotRequestConfig</a> object, which is an extension of the <a href="https://axios-http.com/docs/req_config">Axios request config</a>. If provided, this configuration will be applied to every HTTP request made using the instance. See also <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#defaultrequestoptions">Mwbot.defaultRequestOptions</a> for default settings.</p>
<details>
<summary>Additional notes:</summary>
<p>In general, there is no need to set custom request configurations. The following options, in particular, should not be altered unless you know exactly what you‚Äôre doing:</p>
<p>(Properties of <code>MwbotRequestConfig</code>)</p>
<ul>
<li><code>method</code> - Use <code>GET</code> for read-only requests whenever possible. <code>POST</code> is not cacheable and may be routed to a distant datacenter in multi-datacenter setups (such as Wikimedia sites).</li>
<li><code>headers['Content-Type']</code> - The MediaWiki API only supports <a href="https://www.mediawiki.org/wiki/API:Data_formats#Input"><code>application/x-www-form-urlencoded</code> and <code>multipart/form-data</code></a>. The framework selects the appropriate content type automatically.</li>
<li><code>headers['Accept-Encoding']</code> - Handles data compression to <a href="https://www.mediawiki.org/wiki/API:Etiquette#Request_limit">optimize bandwidth usage</a>.</li>
<li><code>params.format</code> - Should always be <code>'json'</code>, as <a href="https://www.mediawiki.org/wiki/API:Data_formats#Output">all other formats have been deprecated or removed</a>. <code>mwbot-ts</code> enforces this by throwing an error if the specification is missing.</li>
<li><code>params.formatversion</code> - The framework assumes <code>{&quot;formatversion&quot;: &quot;2&quot;}</code> to define types and interfaces. Changing this breaks type expectations and offers no benefit.</li>
<li><code>responseType</code> - Should be left unchanged, as with <code>params.format</code>; otherwise, it may cause an <code>invalidjson</code> error.</li>
<li><code>responseEncoding</code> - Modifying this may cause garbled text unless handled carefully.</li>
</ul>
</details>
<h3 id="request-methods" class="tsd-anchor-link">Request methods<a href="#request-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><h4 id="basic-request-methods" class="tsd-anchor-link">Basic request methods<a href="#basic-request-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For basic API calls, <code>mwbot-ts</code> provides the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#get"><code>get</code></a> and <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#post"><code>post</code></a> methods, both built on the method-neutral <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#request"><code>request</code></a> method. For read-only queries with long parameters, the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#nonwritePost"><code>nonwritePost</code></a> method acts as a POST-based alternative to <code>get</code>, helping avoid <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/414"><code>414 URI Too Long</code></a> errors. When you‚Äôre unsure whether to use <code>GET</code> or <code>POST</code> for a read-only query, the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#fetch"><code>fetch</code></a> method automatically selects the appropriate method based on request length and intent. For complete control over the request configuration, use <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#rawRequest"><code>rawRequest</code></a>. To cancel all in-flight requests, use <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#abort"><code>abort</code></a>.</p>
<details>
<summary>get</summary>
<pre><code class="ts"><span class="hl-6">// Use for standard GET-based queries (read-only, short parameters)</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">titles:</span><span class="hl-1"> </span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">prop:</span><span class="hl-1"> </span><span class="hl-2">&#39;info&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>post</summary>
<pre><code class="ts"><span class="hl-6">// Use for standard write operations or when POST is required</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;purge&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">titles:</span><span class="hl-1"> </span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>nonwritePost</summary>
<pre><code class="ts"><span class="hl-6">// Use when a GET request may exceed URL length limits</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">nonwritePost</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">list:</span><span class="hl-1"> </span><span class="hl-2">&#39;blocks&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bkusers:</span><span class="hl-1"> [</span><span class="hl-6">/* very long field */</span><span class="hl-1">], </span><span class="hl-6">// Note: `mwbot-ts` accepts array inputs</span><br/><span class="hl-1">  </span><span class="hl-4">bklimit:</span><span class="hl-1"> </span><span class="hl-2">&#39;max&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>fetch</summary>
<pre><code class="ts"><span class="hl-6">// Performs a read-only API request, letting mwbot-ts decide the appropriate HTTP method</span><br/><span class="hl-6">// Automatically switches from GET to POST if the query is too long to fit in the URL</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">fetch</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">titles:</span><span class="hl-1"> [</span><span class="hl-6">/* A field that can be either short or long */</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>rawRequest</summary>
<pre><code class="ts"><span class="hl-6">// Performs a raw HTTP GET request to an arbitrary external API</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">res</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">rawRequest</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">method:</span><span class="hl-1"> </span><span class="hl-2">&#39;GET&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;https://api.github.com/repos/nodejs/node&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">headers:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;User-Agent&#39;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">`mwbot-ts/</span><span class="hl-5">${</span><span class="hl-7">MWBOT_VERSION</span><span class="hl-5">}</span><span class="hl-2"> (https://github.com/Dr4goniez/mwbot-ts)`</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">timeout:</span><span class="hl-1"> </span><span class="hl-9">10000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">responseType:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">.</span><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">full_name</span><span class="hl-1">); </span><span class="hl-6">// &quot;nodejs/node&quot;</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>abort</summary>
<pre><code class="ts"><span class="hl-6">// Cancels all ongoing HTTP requests issued by this instance</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">abort</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

</details>
<h4 id="utility-request-methods" class="tsd-anchor-link">Utility request methods<a href="#utility-request-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#continuedrequest">continuedRequest</a> method simplifies handling <a href="https://www.mediawiki.org/wiki/API:Continue">API continuation</a>. It returns a <code>Promise</code> that resolves to an array of continued API responses:</p>
<details>
<summary>continuedRequest</summary>
<pre><code class="ts"><span class="hl-6">// Performs an API request with automatic continuation</span><br/><span class="hl-6">// By default, continues up to 10 times (or until complete)</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">continuedRequest</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">list:</span><span class="hl-1"> </span><span class="hl-2">&#39;logevents&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">leprop:</span><span class="hl-1"> </span><span class="hl-2">&#39;ids|title|timestamp&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">letype:</span><span class="hl-1"> </span><span class="hl-2">&#39;newusers&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">lelimit:</span><span class="hl-1"> </span><span class="hl-2">&#39;max&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<p>The <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#massrequest">massRequest</a> method makes it easier to work with API parameters that accept multiple values. It automatically splits long fields into batches and bundles the results for you (see also the <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#apilimit">apilimit</a> getter):</p>
<details>
<summary>massRequest</summary>
<pre><code class="ts"><span class="hl-6">// Performs batched API requests when a multi-value field exceeds the limit</span><br/><span class="hl-6">// Automatically splits the field and bundles the responses</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">massRequest</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">list:</span><span class="hl-1"> </span><span class="hl-2">&#39;blocks&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bkprop:</span><span class="hl-1"> </span><span class="hl-2">&#39;user|timestamp|expiry|restrictions|flags&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bklimit:</span><span class="hl-1"> </span><span class="hl-2">&#39;max&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bkusers:</span><span class="hl-1"> [</span><span class="hl-6">/* very long field */</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">}, </span><span class="hl-2">&#39;bkusers&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<h4 id="token-related-methods" class="tsd-anchor-link">Token-related methods<a href="#token-related-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>When working with the MediaWiki API, handling tokens for database <em>write</em> actions can be tedious: you need to manage cookies and sessions, fetch a token in one request, and include it in a subsequent write request ‚Äî while ensuring the request method and encoding are correct. The <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#postwithtoken">postWithToken</a> method automates this process. It caches tokens for you and appends the required <code>token</code> property to your request parameters:</p>
<details>
<summary>postWithToken</summary>
<pre><code class="ts"><span class="hl-6">// Example for using a &quot;watch&quot; token</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">postWithToken</span><span class="hl-1">(</span><span class="hl-2">&#39;watch&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;watch&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">titles:</span><span class="hl-1"> </span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// `token` parameter automatically appended</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<p>See also <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#postwithcsrftoken">postWithCsrfToken</a>, a shorthand method for the commonly used <code>csrf</code> token.</p>
<h4 id="edit-related-methods" class="tsd-anchor-link">Edit-related methods<a href="#edit-related-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><code>mwbot-ts</code> provides the following four methods for editing pages:</p>
<ul>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#create">create</a> - Creates a new page. If the page already exists, the <code>Promise</code> is rejected with an <code>articleexists</code> error. There's no need to pre-check for existence.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#save">save</a> - Saves a content to an existing page. By default, it rejects if the page does not exist.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#newsection">newSection</a> - Adds a new section to a page.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#edit">edit</a> - Fetches the latest revision of a page, applies a transformation function, and submits the modified content. Automatically handles edit conflicts up to 3 times.
<ul>
<li><code>mwbot.edit()</code> also supports <a href="https://en.wikipedia.org/wiki/Template:Bots">exclusion compliance</a> ‚Äî that is, reading <code>{{bots}}</code> and <code>{{nobots}}</code> templates in the page content and determining whether your bot is opted in. With <code>mwbot-ts</code>, this is easy to implement: simply pass <code>{ comply: true }</code> to the method. There‚Äôs no need to handle any complex regex manually. See also <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.ExclusionComplianceConfig.html"><code>ExclusionComplianceConfig</code></a>.</li>
</ul>
</li>
</ul>
<p>All of these methods return a <code>Promise</code> that resolves with an <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.ApiResponseEditSuccess.html">ApiResponseEditSuccess</a> object or rejects with a <code>MwbotError</code> (see <a href="#error-handling">#Error handling</a>). When the <code>Promise</code> resolves, the <code>result</code> field is always <code>'Success'</code>, and all other cases are handled with a rejection. In other words, there is no need to inspect the response object to verify whether the edit succeeded: When <code>then()</code> is called, that's a success, and when <code>catch()</code> is called, that's a failure.</p>
<details>
<summary>ApiResponseEditSuccess</summary>
<pre><code><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">new</span><span class="hl-1">: </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">result</span><span class="hl-1">: </span><span class="hl-2">&#39;Success&#39;</span><span class="hl-1">, </span><span class="hl-6">// This will NEVER be anything but &#39;Success&#39;</span><br/><span class="hl-1">  </span><span class="hl-10">pageid</span><span class="hl-1">: </span><span class="hl-9">165499</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">title</span><span class="hl-1">: </span><span class="hl-2">&#39;Bar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">contentmodel</span><span class="hl-1">: </span><span class="hl-2">&#39;wikitext&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">oldrevid</span><span class="hl-1">: </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">newrevid</span><span class="hl-1">: </span><span class="hl-9">654607</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">newtimestamp</span><span class="hl-1">: </span><span class="hl-2">&#39;2025-04-15T11:32:49Z&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">watched</span><span class="hl-1">: </span><span class="hl-5">true</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary>create</summary>
<pre><code class="ts"><span class="hl-6">// Creates a page titled &#39;Bar&#39;</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Bar&#39;</span><span class="hl-1">,            </span><span class="hl-6">// Page title</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Test. --~~~~&#39;</span><span class="hl-1">, </span><span class="hl-6">// Page content</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;test&#39;</span><span class="hl-1">            </span><span class="hl-6">// Optional edit summary</span><br/><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>save</summary>
<pre><code class="ts"><span class="hl-6">// Edits an existing page titled &#39;Foo&#39; and replaces its entire content</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">,            </span><span class="hl-6">// The page title</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Test. --~~~~&#39;</span><span class="hl-1">, </span><span class="hl-6">// The page content</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;test&#39;</span><span class="hl-1">            </span><span class="hl-6">// Optional edit summary</span><br/><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>newSection</summary>
<pre><code class="ts"><span class="hl-6">// Adds a new section to page &#39;Foo&#39;</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">newSection</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">,              </span><span class="hl-6">// The page title</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Bot notice&#39;</span><span class="hl-1">,       </span><span class="hl-6">// The section title</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Hi. ~~~~&#39;</span><span class="hl-1">,         </span><span class="hl-6">// The section content</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Bot: Notification&#39;</span><span class="hl-1"> </span><span class="hl-6">// Optional edit summary</span><br/><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>edit</summary>
<pre><code class="ts"><span class="hl-6">// Edits &#39;Bar&#39; by transforming the existing content</span><br/><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">edit</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Bar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  (</span><span class="hl-4">wikitext</span><span class="hl-1">, </span><span class="hl-4">revision</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">newContent</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1"> + </span><span class="hl-2">&#39;</span><span class="hl-11">\n</span><span class="hl-2">* Test. --~~~~&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> { </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-4">newContent</span><span class="hl-1"> }; </span><span class="hl-6">// Parameters to `action=edit`</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<p>To handle edit failures, all you need to do is:</p>
<details>
<summary>Handling edit failures</summary>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">MwbotError</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mwbot-ts&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// ...</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">(...</span><span class="hl-4">args</span><span class="hl-1">).</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-4">err</span><span class="hl-1">: </span><span class="hl-8">MwbotError</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">MwbotError</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">code</span><span class="hl-1"> !== </span><span class="hl-2">&#39;aborted&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">); </span><span class="hl-6">// MwbotError object</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">); </span><span class="hl-6">// ApiResponseEditSuccess</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
<h4 id="other-utility-methods" class="tsd-anchor-link">Other Utility Methods<a href="#other-utility-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p><code>mwbot-ts</code> also provides helper methods for common tasks, as listed below. Versatile utility methods may be added upon request, and such requests are always welcome! üòä</p>
<details>
<summary>List of utility request methods</summary>
<ul>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#block"><code>block</code></a>: Blocks a user.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#delete"><code>delete</code></a>: Deletes a page.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getbacklinks"><code>getBacklinks</code></a>: Retrieves a list of pages that link to the given page(s).</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getcategories"><code>getCategories</code></a>: Retrieves the categories to which the specified titles belong.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getcategoriesbyprefix"><code>getCategoriesByPrefix</code></a>: Returns a list of categories that match a given prefix.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getcategorymembers"><code>getCategoryMembers</code></a>: Retrieves a list of pages that belong to the given category.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getexistencepredicate"><code>getExistencePredicate</code></a>: Returns an <code>exists()</code> function that checks whether given pages exist.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#gettransclusions"><code>getTransclusions</code></a>: Retrieves a list of pages that transclude the given page(s).</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#move"><code>move</code></a>: Moves a page.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#parse"><code>parse</code></a>: Runs the parser via the API.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#prefixsearch"><code>prefixSearch</code></a>: Performs a prefix search for page titles.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#protect"><code>protect</code></a>: Protects a page.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#purge"><code>purge</code></a>: Clears the server-side cache for the specified pages.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#read"><code>read</code></a>: Retrieves the latest revision content of the specified page(s).</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#rollback"><code>rollback</code></a>: Rolls back the most recent edits to a page made by a specific user.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#search"><code>search</code></a>: Performs a full-text search.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#unblock"><code>unblock</code></a>: Unblocks a user.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#undelete"><code>undelete</code></a>: Undeletes revisions of a deleted page.</li>
<li><a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#unprotect"><code>unprotect</code></a>: Unprotects a page.</li>
</ul>
</details>
<h3 id="extend-the-class" class="tsd-anchor-link">Extend the Class<a href="#extend-the-class" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Different bot operators have different needs, and it‚Äôs common to define custom functions using native framework methods. For example, a quick way to check whether a page exists might look like this:</p>
<blockquote>
<p><strong>Note</strong>: <code>mwbot-ts</code> includes a built-in method for checking page existence: <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#getexistencepredicate"><code>getExistencePredicate</code></a>.</p>
</blockquote>
<details>
<summary>Implement an <code>exists()</code> function</summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-0">exists</span><span class="hl-1"> = </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">boolean</span><span class="hl-1">&gt; </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// mwbot.read() rejects if the page doesn&#39;t exist</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">res</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-4">title</span><span class="hl-1">).</span><span class="hl-0">catch</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> !!</span><span class="hl-4">res</span><span class="hl-1">; </span><span class="hl-6">// true if the page exists; otherwise false</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

</details>
<p>This works, but it comes with a few limitations:</p>
<ul>
<li>You need to manually pass around an initialized <code>mwbot</code> instance, especially if the function lives in a separate module.</li>
<li>Native methods aren't always the most efficient for your specific needs. In this case, <code>mwbot.read()</code> fetches the entire page content, which is overkill if you only want to check existence.</li>
</ul>
<p>A more scalable and idiomatic solution is to extend the <code>Mwbot</code> class. Subclassing lets you define custom behavior as instance methods while preserving access to all built-in functionality and internal configuration. You avoid wiring up external helpers and instead encapsulate logic cleanly within the class.</p>
<details>
<summary>Implement an <code>exists()</code> <i>method</i></summary>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Mwbot</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mwbot-ts&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-8">Mwbot2</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-8">Mwbot</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">/**</span><br/><span class="hl-6">   * Checks if the given page exists. Returns `null` if the request fails.</span><br/><span class="hl-6">   * </span><span class="hl-5">@param</span><span class="hl-6"> </span><span class="hl-4">title</span><br/><span class="hl-6">   */</span><br/><span class="hl-1">  </span><span class="hl-0">exists</span><span class="hl-1">(</span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-8">boolean</span><span class="hl-1"> | </span><span class="hl-8">null</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;query&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">titles:</span><span class="hl-1"> </span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">    }).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-4">res</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">page</span><span class="hl-1"> = </span><span class="hl-4">res</span><span class="hl-1">.</span><span class="hl-4">query</span><span class="hl-1">?.</span><span class="hl-4">pages</span><span class="hl-1">?.[</span><span class="hl-9">0</span><span class="hl-1">];</span><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">page</span><span class="hl-1"> ? !</span><span class="hl-4">page</span><span class="hl-1">.</span><span class="hl-4">missing</span><span class="hl-1"> : </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">    }).</span><span class="hl-0">catch</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">Mwbot2</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">initOptions</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-4">mwbot</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// ‚úì Fully type-safe, no TypeScript errors</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">sandExists</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">exists</span><span class="hl-1">(</span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">sandExists</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// ‚úì Superclass methods and properties are still accessible</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;wgNamespaceIds&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p><strong>Note</strong>: The <code>exists()</code> method above is intended as <strong>a simple example</strong>. In production, it should also account for false positives. For instance, if the input title is invalid, the response may lack a <code>missing</code> property, leading this method to incorrectly return <code>true</code> (see <a href="https://en.wikipedia.org/w/api.php?action=query&amp;formatversion=2&amp;&amp;titles=%7B">this example</a>).</p>
</blockquote>
</details>
<p>Extending the class also allows you to optimize or customize default request behavior. For example, if you'd like your <code>purge()</code> call to include the <a href="https://www.mediawiki.org/wiki/API:Purge#purge:forcerecursivelinkupdate"><code>forcerecursivelinkupdate</code></a> parameter by default, you can define your own specialized method:</p>
<details>
<summary>Implement a <code>purgeDeep()</code> method</summary>
<pre><code class="ts"><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-8">Mwbot2</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-8">Mwbot</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-0">purgeDeep</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">titles</span><span class="hl-1">: (</span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">Title</span><span class="hl-1">)[],</span><br/><span class="hl-1">    </span><span class="hl-4">additionalParams</span><span class="hl-1">: </span><span class="hl-8">ApiParams</span><span class="hl-1"> = {},</span><br/><span class="hl-1">    </span><span class="hl-4">requestOptions</span><span class="hl-1">: </span><span class="hl-8">MwbotRequestConfig</span><span class="hl-1"> = {}</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-4">additionalParams</span><span class="hl-1"> = </span><span class="hl-4">Object</span><span class="hl-1">.</span><span class="hl-0">assign</span><span class="hl-1">(</span><br/><span class="hl-1">      { </span><span class="hl-4">forcerecursivelinkupdate:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">additionalParams</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-0">purge</span><span class="hl-1">(</span><span class="hl-4">titles</span><span class="hl-1">, </span><span class="hl-4">additionalParams</span><span class="hl-1">, </span><span class="hl-4">requestOptions</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
<blockquote>
<p><strong>Tip</strong>: When extending the class, always choose unique method names. Avoid overriding built-in methods, as some rely on others internally.<br>If you're using TypeScript, it's highly recommended to enable the <code>noImplicitOverride</code> option in your <code>tsconfig.json</code>. This ensures you‚Äôll get a compile-time error if you accidentally reuse a name that already exists, or is added in a version update.</p>
</blockquote>
<h2 id="error-handling" class="tsd-anchor-link">Error handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>mwbot-ts</code> uses a custom error class named <a href="https://dr4goniez.github.io/mwbot-ts/classes/MwbotError.MwbotError.html">MwbotError</a> to standardize error handling. When <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html">Mwbot</a>'s request methods reject with an error, they <strong>always</strong> return an instance of <code>MwbotError</code> with a full stack trace.</p>
<p>This design addresses a key shortcoming of the original <code>mwbot</code> framework ‚Äî that is, it was often unclear what properties an error object would contain. In contrast, <code>MwbotError</code> instances always include a <code>code</code> and <code>info</code> property, closely mirroring the error structure used by MediaWiki‚Äôs built-in <code>mediawiki.Api</code> module when returning API error responses.</p>
<details>
<summary>For example:</summary>
<pre><code class="ts"><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;edit&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">appendtext:</span><span class="hl-1"> </span><span class="hl-2">&#39;</span><span class="hl-11">\n</span><span class="hl-2">* Test. --~~~~&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">format:</span><span class="hl-1"> </span><span class="hl-2">&#39;json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">formatversion:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-10">MwbotError</span><span class="hl-1">: </span><span class="hl-4">The</span><span class="hl-1"> </span><span class="hl-2">&quot;token&quot;</span><span class="hl-1"> </span><span class="hl-4">parameter</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-4">set</span><span class="hl-1">.</span><br/><span class="hl-1">    </span><span class="hl-4">at</span><span class="hl-1"> </span><span class="hl-4">Function</span><span class="hl-1">.</span><span class="hl-0">newFromResponse</span><span class="hl-1"> (</span><span class="hl-7">W</span><span class="hl-1">:\</span><span class="hl-4">Programming</span><span class="hl-1">\</span><span class="hl-4">Git</span><span class="hl-1">\</span><span class="hl-4">home</span><span class="hl-1">\</span><span class="hl-4">mwbot</span><span class="hl-1">-</span><span class="hl-4">ts</span><span class="hl-1">\</span><span class="hl-4">src</span><span class="hl-1">\</span><span class="hl-4">MwbotError</span><span class="hl-1">.</span><span class="hl-4">ts</span><span class="hl-1">:</span><span class="hl-9">119</span><span class="hl-1">:</span><span class="hl-9">10</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">at</span><span class="hl-1"> </span><span class="hl-4">Mwbot</span><span class="hl-1">.</span><span class="hl-0">_request</span><span class="hl-1"> (</span><span class="hl-7">W</span><span class="hl-1">:\</span><span class="hl-4">Programming</span><span class="hl-1">\</span><span class="hl-4">Git</span><span class="hl-1">\</span><span class="hl-4">home</span><span class="hl-1">\</span><span class="hl-4">mwbot</span><span class="hl-1">-</span><span class="hl-4">ts</span><span class="hl-1">\</span><span class="hl-4">src</span><span class="hl-1">\</span><span class="hl-4">Mwbot</span><span class="hl-1">.</span><span class="hl-4">ts</span><span class="hl-1">:</span><span class="hl-9">1062</span><span class="hl-1">:</span><span class="hl-9">27</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">at</span><span class="hl-1"> </span><span class="hl-0">processTicksAndRejections</span><span class="hl-1"> (</span><span class="hl-4">node</span><span class="hl-1">:</span><span class="hl-4">internal</span><span class="hl-1">/</span><span class="hl-4">process</span><span class="hl-1">/</span><span class="hl-4">task_queues</span><span class="hl-1">:</span><span class="hl-9">95</span><span class="hl-1">:</span><span class="hl-9">5</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-10">type</span><span class="hl-1">: </span><span class="hl-2">&#39;api&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">code</span><span class="hl-1">: </span><span class="hl-2">&#39;missingparam&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">info</span><span class="hl-1">: </span><span class="hl-2">&#39;The &quot;token&quot; parameter must be set.&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">data</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-10">error</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">docref</span><span class="hl-1">: </span><span class="hl-2">&#39;See https://ja.wikipedia.org/w/api.php for API usage. Subscribe to the mediawiki-api-announce mailing list at &amp;lt;https://lists.wikimedia.org/postorius/lists/mediawiki-api-announce.lists.wikimedia.org/&amp;gt; for notice of API deprecations and breaking changes.&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>

</details>
<p>The <code>type</code> property categorizes the error source:</p>
<ul>
<li><code>'api'</code>: An error originating directly from the MediaWiki API.</li>
<li><code>'api_mwbot'</code>: An error defined internally by <code>mwbot-ts</code>, such as generic HTTP errors returned from Axios.</li>
<li><code>'fatal'</code>: A logic or implementation error occurring within the client itself.</li>
</ul>
<p>Given this consistent structure, a single <code>catch</code> block can gracefully handle virtually any error:</p>
<details>
<summary>Error handling with <code>Promise.prototype.catch</code>:</summary>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">MwbotError</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;mwbot-ts&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// ...</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">request</span><span class="hl-1">(</span><span class="hl-4">params</span><span class="hl-1">).</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-4">err</span><span class="hl-1">: </span><span class="hl-8">MwbotError</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">MwbotError</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">code</span><span class="hl-1"> !== </span><span class="hl-2">&#39;aborted&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">); </span><span class="hl-6">// MwbotError object</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">); </span><span class="hl-6">// JSON response</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
<p>For a complete list of possible error codes, refer to the <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/MwbotError.MwbotErrorCodes.html">MwbotErrorCodes</a> documentation.</p>
<h2 id="wikitext-parser" class="tsd-anchor-link">Wikitext parser<a href="#wikitext-parser" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Wikitext.WikitextStatic.html">Wikitext</a> class, accesible via <code>mwbot.Wikitext</code>, facilitates common bot operations involving wikitext parsing. It currently supports five types of wiki markup:</p>
<ul>
<li><code>&lt;tag&gt;&lt;/tag&gt;</code></li>
<li><code>== section ==</code></li>
<li><code>{{{parameter}}}</code></li>
<li><code>{{template}}</code>, including (double-braced) <a href="https://www.mediawiki.org/wiki/Help:Magic_words">magic words</a> and <a href="https://www.mediawiki.org/wiki/Help:Extension:ParserFunctions">parser functions</a>.</li>
<li><code>[[wikilink]]</code></li>
</ul>
<p>For each markup type, the class provides <code>parse**</code> and <code>modify**</code> methods, where <code>**</code> denotes the type (e.g., <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Wikitext.Wikitext.html#parsetemplates"><code>parseTemplates</code></a>).</p>
<p>To create a new instance, use the constructor or the static <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Wikitext.Wikitext.html#parsetemplates">newFromTitle</a> method, which fetches the content of a page and returns a <code>Promise</code> resolving to a <code>Wikitext</code> instance:</p>
<details>
<summary><code>Wikitext.constructor</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-2">&#39;some wikitext&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary><code>Wikitext.newFromTitle</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">Wikitext</span><span class="hl-1">.</span><span class="hl-0">newFromTitle</span><span class="hl-1">(</span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</details>
<p>The parsing and modification methods are available as instance methods:</p>
<details>
<summary><code>wikitext.parseTags</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;My name is &lt;b&gt;Foo&lt;/b&gt;&lt;!-- not &quot;Bar&quot;! --&gt;.</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;You can ping me using &lt;nowiki&gt;{{PingFoo}}&lt;/nowiki&gt;.&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">parseTags</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">[</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;b&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">start:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;b&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">end:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;/b&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">11</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">21</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">void:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">unclosed:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">selfClosing:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;!--&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">start:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;!--&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39; not &quot;Bar&quot;! &#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">end:</span><span class="hl-1"> </span><span class="hl-2">&#39;--&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">21</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">40</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">void:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">unclosed:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">selfClosing:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;nowiki&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">start:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;nowiki&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{PingFoo}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">end:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;/nowiki&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">64</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">92</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">void:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">unclosed:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">selfClosing:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.parseSections</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;== Foo ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;=== Bar ===</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;[[Main page]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;== Baz ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;[[Another page]]&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">parseSections</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">[</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">heading:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;top&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">level:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">heading:</span><span class="hl-1"> </span><span class="hl-2">&#39;== Foo ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">level:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">36</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;=== Bar ===</span><span class="hl-11">\n</span><span class="hl-2">[[Main page]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">) { </span><span class="hl-9">2</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">heading:</span><span class="hl-1"> </span><span class="hl-2">&#39;=== Bar ===</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Bar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">level:</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">10</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">36</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[Main page]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">heading:</span><span class="hl-1"> </span><span class="hl-2">&#39;== Baz ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Baz&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">level:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">36</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">62</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">content:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[Another page]]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.parseParameters</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;{{#if:{{{1|}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;&lt;!--|{{{type}}}--&gt;&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|{{{1}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|{{{2|empty}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;}}&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">parseParameters</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">[</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{{1|}}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">6</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">14</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;type&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{{type}}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">20</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">30</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{{1}}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">34</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">41</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">    </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-2">&#39;empty&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{{2|empty}}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">43</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">56</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.parseTemplates</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;{{Foo</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|anchor={{#if:{{ns:0}}|Foo|Bar}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|logo=[[File:Img.png|thumb|Mr. [[Foo]]|300px]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;}}&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">parseTemplates</span><span class="hl-1">(), {</span><span class="hl-4">depth:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">[</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">Title</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">namespace:</span><span class="hl-1"> </span><span class="hl-9">10</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">fragment:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">colon:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">interwiki:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">local_interwiki:</span><span class="hl-1"> </span><span class="hl-5">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">params:</span><span class="hl-1"> [</span><span class="hl-4">Object</span><span class="hl-1">: </span><span class="hl-5">null</span><span class="hl-1"> </span><span class="hl-4">prototype</span><span class="hl-1">] {</span><br/><span class="hl-1">      </span><span class="hl-4">anchor:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;anchor&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{#if:{{ns:0}}|Foo|Bar}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">unnamed:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">duplicates:</span><span class="hl-1"> []</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">logo:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">key:</span><span class="hl-1"> </span><span class="hl-2">&#39;logo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">value:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[File:Img.png|thumb|Mr. [[Foo]]|300px]]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">text:</span><span class="hl-1"> [</span><span class="hl-4">Getter</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">unnamed:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">duplicates:</span><span class="hl-1"> []</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">rawTitle:</span><span class="hl-1"> </span><span class="hl-2">&#39;Foo</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{Foo</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">      </span><span class="hl-2">&#39;|anchor={{#if:{{ns:0}}|Foo|Bar}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">      </span><span class="hl-2">&#39;|logo=[[File:Img.png|thumb|Mr. [[Foo]]|300px]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">      </span><span class="hl-2">&#39;}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">88</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">1</span><span class="hl-1">) { </span><span class="hl-9">1</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedParserFunction</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">params:</span><span class="hl-1"> [ </span><span class="hl-2">&#39;{{ns:0}}&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Bar&#39;</span><span class="hl-1"> ],</span><br/><span class="hl-1">    </span><span class="hl-4">hook:</span><span class="hl-1"> </span><span class="hl-2">&#39;#if:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">canonicalHook:</span><span class="hl-1"> </span><span class="hl-2">&#39;#if:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">rawHook:</span><span class="hl-1"> </span><span class="hl-2">&#39;#if:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{#if:{{ns:0}}|Foo|Bar}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">14</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">38</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">2</span><span class="hl-1">) { </span><span class="hl-9">1</span><span class="hl-1">, </span><span class="hl-9">2</span><span class="hl-1"> }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedParserFunction</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">params:</span><span class="hl-1"> [ </span><span class="hl-2">&#39;0&#39;</span><span class="hl-1"> ],</span><br/><span class="hl-1">    </span><span class="hl-4">hook:</span><span class="hl-1"> </span><span class="hl-2">&#39;ns:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">canonicalHook:</span><span class="hl-1"> </span><span class="hl-2">&#39;ns:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">rawHook:</span><span class="hl-1"> </span><span class="hl-2">&#39;ns:&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;{{ns:0}}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">20</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">28</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.parseWikilinks</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;[[File:Img.png|thumb|right|300px]]</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;&#39;&#39;&#39;Foo&#39;&#39;&#39; is a [[metasyntactic variable]]&lt;!--[[metavariable]]--&gt;.&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">dir</span><span class="hl-1">(</span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">parseWikilinks</span><span class="hl-1">(), {</span><span class="hl-4">depth:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">[</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedFileWikilink</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">params:</span><span class="hl-1"> [ </span><span class="hl-2">&#39;thumb&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;right&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;300px&#39;</span><span class="hl-1"> ],</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">Title</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">namespace:</span><span class="hl-1"> </span><span class="hl-9">6</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Img.png&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">fragment:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">colon:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">interwiki:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">local_interwiki:</span><span class="hl-1"> </span><span class="hl-5">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">rawTitle:</span><span class="hl-1"> </span><span class="hl-2">&#39;File:Img.png&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[File:Img.png|thumb|right|300px]]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">34</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedWikilink</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">Title</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">namespace:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Metasyntactic_variable&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">fragment:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">colon:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">interwiki:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">local_interwiki:</span><span class="hl-1"> </span><span class="hl-5">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">rawTitle:</span><span class="hl-1"> </span><span class="hl-2">&#39;metasyntactic variable&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[metasyntactic variable]]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">50</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">76</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">ParsedWikilink</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">Title</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">namespace:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-2">&#39;Metavariable&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">fragment:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">colon:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">interwiki:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">local_interwiki:</span><span class="hl-1"> </span><span class="hl-5">false</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">rawTitle:</span><span class="hl-1"> </span><span class="hl-2">&#39;metavariable&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;[[metavariable]]&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">index:</span><span class="hl-1"> </span><span class="hl-9">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">startIndex:</span><span class="hl-1"> </span><span class="hl-9">80</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">endIndex:</span><span class="hl-1"> </span><span class="hl-9">96</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">nestLevel:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">skip:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parent:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">children:</span><span class="hl-1"> </span><span class="hl-0">Set</span><span class="hl-1">(</span><span class="hl-9">0</span><span class="hl-1">) {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button>Copy</button></pre>

</details>
<p>In many cases, you can skip calling the parsing methods:</p>
<ul>
<li>You can use the corresponding <code>modify**</code> methods directly, which internally call the appropriate <code>parse**</code> method and apply a transformation via a callback function. Each callback receives one element from the parsed array.</li>
<li>You can call a modification method from inside the callback function of <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#edit"><code>mwbot.edit()</code></a> (referred to as &quot;<a href="https://dr4goniez.github.io/mwbot-ts/types/Mwbot.TransformationPredicate.html">transformation predicate</a>&quot;), which takes a <code>Wikitext</code> instance as its first argument.</li>
</ul>
<details>
<summary><code>wikitext.modifyTags</code></summary>
<pre><code class="ts"><span class="hl-6">// Example: Remove empty &lt;noinclude&gt; tags from &quot;Wikipedia:Sandbox&quot;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">edit</span><span class="hl-1">(</span><span class="hl-2">&#39;Wikipedia:Sandbox&#39;</span><span class="hl-1">, (</span><span class="hl-4">wikitext</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">oldContent</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">newContent</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyTags</span><span class="hl-1">((</span><span class="hl-4">tag</span><span class="hl-1">, </span><span class="hl-4">_i</span><span class="hl-1">, </span><span class="hl-4">_arr</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">isEmptyNoinclude</span><span class="hl-1"> =</span><br/><span class="hl-1">      </span><span class="hl-4">tag</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1"> === </span><span class="hl-2">&#39;noinclude&#39;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">      </span><span class="hl-6">// Ignore e.g., &lt;nowiki&gt;&lt;noinclude&gt;&lt;/noinclude&gt;&lt;/nowiki&gt;</span><br/><span class="hl-1">      !</span><span class="hl-4">tag</span><span class="hl-1">.</span><span class="hl-4">skip</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">      </span><span class="hl-6">// Ignore &lt;noinclude /&gt;</span><br/><span class="hl-1">      !</span><span class="hl-4">tag</span><span class="hl-1">.</span><span class="hl-4">selfClosing</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">      </span><span class="hl-6">// Eliminate uncertainty</span><br/><span class="hl-1">      !</span><span class="hl-4">tag</span><span class="hl-1">.</span><span class="hl-4">unclosed</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">      </span><span class="hl-6">// Has no content or only whitespace</span><br/><span class="hl-1">      !</span><span class="hl-4">tag</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">?.</span><span class="hl-0">trim</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// A string return indicates &quot;replace `tag.text` with this value&quot;;</span><br/><span class="hl-1">    </span><span class="hl-6">// `null` means no change.</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">isEmptyNoinclude</span><span class="hl-1"> ? </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> : </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">oldContent</span><span class="hl-1"> === </span><span class="hl-4">newContent</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">// A tranformation predicate returning `null` will cancel the edit</span><br/><span class="hl-1">    </span><span class="hl-6">// via a Promise rejection with an &quot;aborted&quot; error code</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Edit cancelled.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Return API parameters for `action=edit`</span><br/><span class="hl-1">  </span><span class="hl-6">// Partial specification is acceptable because `edit()` provides default parameters</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> { </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-4">newContent</span><span class="hl-1"> };</span><br/><br/><span class="hl-1">}).</span><span class="hl-0">catch</span><span class="hl-1">((</span><span class="hl-4">err</span><span class="hl-1">: </span><span class="hl-8">MwbotError</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">err</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Uniform error handling</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">result</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">MwbotError</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">code</span><span class="hl-1"> !== </span><span class="hl-2">&#39;aborted&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1">); </span><span class="hl-6">// Failure</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1">); </span><span class="hl-6">// Success</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary><code>wikitext.modifySections</code></summary>
<pre><code class="ts"><span class="hl-6">// Example: Insert {{Section resolved}} to the beginning of second-level sections</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;== Foo ==&lt;!--</span><span class="hl-11">\n</span><span class="hl-2">--&gt;</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Foo. --~~~~</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;=== Foo2 ===</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Foo2. --~~~~</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;== Bar ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Bar. --~~~~</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;== Baz ==</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;* Baz. --~~~~&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">content</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifySections</span><span class="hl-1">((</span><span class="hl-4">section</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// Do not modify sections that are not level 2</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">level</span><span class="hl-1"> !== </span><span class="hl-9">2</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Check whether the section heading ends with a newline; if not, add one</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">newline</span><span class="hl-1"> = </span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">heading</span><span class="hl-1">.</span><span class="hl-0">endsWith</span><span class="hl-1">(</span><span class="hl-2">&#39;</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">) ? </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Insert the template between the heading and the content</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">heading</span><span class="hl-1"> + </span><span class="hl-4">newline</span><span class="hl-1"> + </span><span class="hl-2">&#39;{{Section resolved|1=~~~~}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> + </span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">== </span><span class="hl-4">Foo</span><span class="hl-1"> ==&lt;!--</span><br/><span class="hl-1">--&gt;</span><br/><span class="hl-1">{{</span><span class="hl-4">Section</span><span class="hl-1"> </span><span class="hl-4">resolved</span><span class="hl-1">|</span><span class="hl-9">1</span><span class="hl-1">=~~~~}}</span><br/><span class="hl-1">* </span><span class="hl-4">Foo</span><span class="hl-1">. --~~~~</span><br/><span class="hl-1">=== </span><span class="hl-4">Foo2</span><span class="hl-1"> ===</span><br/><span class="hl-1">* </span><span class="hl-4">Foo2</span><span class="hl-1">. --~~~~</span><br/><span class="hl-1">== </span><span class="hl-4">Bar</span><span class="hl-1"> ==</span><br/><span class="hl-1">{{</span><span class="hl-4">Section</span><span class="hl-1"> </span><span class="hl-4">resolved</span><span class="hl-1">|</span><span class="hl-9">1</span><span class="hl-1">=~~~~}}</span><br/><span class="hl-1">* </span><span class="hl-4">Bar</span><span class="hl-1">. --~~~~</span><br/><span class="hl-1">== </span><span class="hl-4">Baz</span><span class="hl-1"> ==</span><br/><span class="hl-1">{{</span><span class="hl-4">Section</span><span class="hl-1"> </span><span class="hl-4">resolved</span><span class="hl-1">|</span><span class="hl-9">1</span><span class="hl-1">=~~~~}}</span><br/><span class="hl-1">* </span><span class="hl-4">Baz</span><span class="hl-1">. --~~~~</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.modifyParameters</code></summary>
<pre><code class="ts"><span class="hl-6">// Rename {{{1}}} to {{{User}}}</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;{{#if:{{{1|}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|{{{1}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;|{{{Ip|Foo}}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;}}&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">content</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyParameters</span><span class="hl-1">((</span><span class="hl-4">parameter</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">parameter</span><span class="hl-1">.</span><span class="hl-4">key</span><span class="hl-1"> === </span><span class="hl-2">&#39;1&#39;</span><span class="hl-1"> &amp;&amp; !</span><span class="hl-4">parameter</span><span class="hl-1">.</span><span class="hl-4">skip</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">value</span><span class="hl-1"> = </span><span class="hl-4">parameter</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1"> !== </span><span class="hl-5">null</span><span class="hl-1"> ? </span><span class="hl-2">&#39;|&#39;</span><span class="hl-1"> + </span><span class="hl-4">parameter</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1"> : </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-2">&#39;{{{User&#39;</span><span class="hl-1"> + </span><span class="hl-4">value</span><span class="hl-1"> + </span><span class="hl-2">&#39;}}}&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">{{#</span><span class="hl-3">if</span><span class="hl-1">:{{{</span><span class="hl-4">User</span><span class="hl-1">|}}}</span><br/><span class="hl-1">|{{{</span><span class="hl-4">User</span><span class="hl-1">}}}</span><br/><span class="hl-1">|{{{</span><span class="hl-4">Ip</span><span class="hl-1">|</span><span class="hl-4">Foo</span><span class="hl-1">}}}</span><br/><span class="hl-1">}}</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.modifyTemplates</code></summary>
<pre><code class="ts"><span class="hl-6">// Add &quot;|done&quot; to {{Status}} and leave a bot comment</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;=== Global lock for Foo ===</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;{{Status}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;*{{LockHide|1=Foo}}</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Long-term abuse. [[User:Bar|Bar]] ([[User talk:Bar|talk]]) 00:00, 1 January 2025 (UTC)&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Modify {{Status}}</span><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-4">status</span><span class="hl-1">: </span><span class="hl-8">ParsedTemplate</span><span class="hl-1"> | </span><span class="hl-8">null</span><span class="hl-1"> = </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-4">content</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyTemplates</span><span class="hl-1">((</span><span class="hl-4">template</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">status</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">isStatus</span><span class="hl-1"> =</span><br/><span class="hl-1">    </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">Template</span><span class="hl-1">.</span><span class="hl-0">is</span><span class="hl-1">(</span><span class="hl-4">template</span><span class="hl-1">, </span><span class="hl-2">&#39;ParsedTemplate&#39;</span><span class="hl-1">) &amp;&amp;</span><br/><span class="hl-1">    </span><span class="hl-4">template</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">.</span><span class="hl-0">getPrefixedDb</span><span class="hl-1">() === </span><span class="hl-2">&#39;Template:Status&#39;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">    !</span><span class="hl-4">template</span><span class="hl-1">.</span><span class="hl-4">skip</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">isStatus</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">status</span><span class="hl-1"> = </span><span class="hl-4">template</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">template</span><br/><span class="hl-1">      .</span><span class="hl-0">insertParam</span><span class="hl-1">(</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;done&#39;</span><span class="hl-1">, </span><span class="hl-5">true</span><span class="hl-1">, </span><span class="hl-2">&#39;end&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      .</span><span class="hl-0">stringify</span><span class="hl-1">({</span><span class="hl-4">suppressKeys:</span><span class="hl-1"> [</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">]});</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">status</span><span class="hl-1"> === </span><span class="hl-5">null</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Leave a bot comment</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">containingSection</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">identifySection</span><span class="hl-1">(</span><span class="hl-4">status</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">containingSection</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><span class="hl-4">content</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifySections</span><span class="hl-1">((</span><span class="hl-4">section</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">index</span><span class="hl-1"> === </span><span class="hl-4">containingSection</span><span class="hl-1">.</span><span class="hl-4">index</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">section</span><span class="hl-1">.</span><span class="hl-4">text</span><span class="hl-1">.</span><span class="hl-0">trim</span><span class="hl-1">() + </span><span class="hl-2">&quot;</span><span class="hl-11">\n</span><span class="hl-2">: &#39;&#39;&#39;Robot clerk note:&#39;&#39;&#39; {{done}} by Baz. ~~~~</span><span class="hl-11">\n</span><span class="hl-2">&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-1">=== </span><span class="hl-4">Global</span><span class="hl-1"> </span><span class="hl-4">lock</span><span class="hl-1"> </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">Foo</span><span class="hl-1"> ===</span><br/><span class="hl-1">{{</span><span class="hl-4">Status</span><span class="hl-1">|</span><span class="hl-4">done</span><span class="hl-1">}}</span><br/><span class="hl-1">*{{</span><span class="hl-4">LockHide</span><span class="hl-1">|</span><span class="hl-9">1</span><span class="hl-1">=</span><span class="hl-4">Foo</span><span class="hl-1">}}</span><br/><span class="hl-4">Long</span><span class="hl-1">-</span><span class="hl-4">term</span><span class="hl-1"> </span><span class="hl-4">abuse</span><span class="hl-1">. [[</span><span class="hl-4">User</span><span class="hl-1">:</span><span class="hl-4">Bar</span><span class="hl-1">|</span><span class="hl-4">Bar</span><span class="hl-1">]] ([[</span><span class="hl-4">User</span><span class="hl-1"> </span><span class="hl-4">talk</span><span class="hl-1">:</span><span class="hl-4">Bar</span><span class="hl-1">|</span><span class="hl-4">talk</span><span class="hl-1">]]) </span><span class="hl-9">00</span><span class="hl-1">:</span><span class="hl-9">00</span><span class="hl-1">, </span><span class="hl-9">1</span><span class="hl-1"> </span><span class="hl-4">January</span><span class="hl-1"> </span><span class="hl-9">2025</span><span class="hl-1"> (</span><span class="hl-7">UTC</span><span class="hl-1">)</span><br/><span class="hl-1">: </span><span class="hl-2">&#39;&#39;&#39;Robot clerk note:&#39;&#39;&#39;</span><span class="hl-1"> {{</span><span class="hl-4">done</span><span class="hl-1">}} </span><span class="hl-4">by</span><span class="hl-1"> </span><span class="hl-4">Baz</span><span class="hl-1">. ~~~~</span><br/>
</code><button>Copy</button></pre>

</details>
<details>
<summary><code>wikitext.modifyWikilinks</code></summary>
<pre><code class="ts"><span class="hl-6">// Replace all instances of [[Category:Foo]] with [[Category:Bar]]</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;This category belongs to [[:Category:Foo]].</span><span class="hl-11">\n</span><span class="hl-2">&#39;</span><span class="hl-1"> +</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;[[Category:Foo|*]]&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">NS_CATEGORY</span><span class="hl-1"> = </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;wgNamespaceIds&#39;</span><span class="hl-1">).</span><span class="hl-4">category</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">content</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyWikilinks</span><span class="hl-1">((</span><span class="hl-4">link</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">isFoo</span><span class="hl-1"> =</span><br/><span class="hl-1">    </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">Wikilink</span><span class="hl-1">.</span><span class="hl-0">is</span><span class="hl-1">(</span><span class="hl-4">link</span><span class="hl-1">, </span><span class="hl-2">&#39;ParsedWikilink&#39;</span><span class="hl-1">) &amp;&amp;</span><br/><span class="hl-1">    </span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">.</span><span class="hl-0">getNamespaceId</span><span class="hl-1">() === </span><span class="hl-7">NS_CATEGORY</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">.</span><span class="hl-0">getMain</span><span class="hl-1">() === </span><span class="hl-2">&#39;Foo&#39;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">    !</span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-4">skip</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">isFoo</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">colon</span><span class="hl-1"> = </span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">.</span><span class="hl-0">hadLeadingColon</span><span class="hl-1">() ? </span><span class="hl-2">&#39;:&#39;</span><span class="hl-1"> : </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-0">setTitle</span><span class="hl-1">(</span><span class="hl-4">colon</span><span class="hl-1"> + </span><span class="hl-2">&#39;Category:Bar&#39;</span><span class="hl-1">); </span><span class="hl-6">// Preserve the leading colon, if present</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">link</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<pre><code><span class="hl-4">This</span><span class="hl-1"> </span><span class="hl-4">category</span><span class="hl-1"> </span><span class="hl-4">belongs</span><span class="hl-1"> </span><span class="hl-4">to</span><span class="hl-1"> [[:</span><span class="hl-4">Category</span><span class="hl-1">:</span><span class="hl-4">Bar</span><span class="hl-1">]].</span><br/><span class="hl-1">[[</span><span class="hl-4">Category</span><span class="hl-1">:</span><span class="hl-4">Bar</span><span class="hl-1">|*]]</span>
</code><button>Copy</button></pre>

</details>
<details>
<summary>Notes on nested markups</summary>
<p>When a modifying markup has another markup (of the same type) nested within it, modifications can end up overwriting changes made to the parent markup. To handle this safely, use the <code>context</code> object, which is passed as the fourth argument to the <code>ModificationPredicate</code>:</p>
<details>
<summary>Nested markup showcases</summary>
<pre><code class="ts"><span class="hl-6">// Showcase 1</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> = </span><span class="hl-2">&#39;{{Foo|1={{Bar}}}}&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">newContent</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyTemplates</span><span class="hl-1">((</span><span class="hl-4">temp</span><span class="hl-1">, </span><span class="hl-4">i</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">i</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> (</span><span class="hl-4">temp</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-8">ParsedTemplate</span><span class="hl-1">).</span><span class="hl-0">insertParam</span><span class="hl-1">(</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;My name is Foo.&#39;</span><span class="hl-1">).</span><span class="hl-0">stringify</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">// Replaces the entire first parameter of {{Foo}} with &quot;My name is Foo.&quot;,</span><br/><span class="hl-1">    </span><span class="hl-6">// removing the original nested {{Bar}} entirely.</span><br/><span class="hl-1">    </span><span class="hl-6">// Result: {{Foo|1=My name is Foo.}}</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> (</span><span class="hl-4">temp</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-8">ParsedTemplate</span><span class="hl-1">).</span><span class="hl-0">insertParam</span><span class="hl-1">(</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;bar&#39;</span><span class="hl-1">).</span><span class="hl-0">stringify</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">// Modifies the inner {{Bar}} template by inserting 1=bar.</span><br/><span class="hl-1">    </span><span class="hl-6">// Result: {{Bar|1=bar}}</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Then, this modified {{Bar}} is reinserted into {{Foo}} as its first parameter.</span><br/><span class="hl-1">    </span><span class="hl-6">// Because the original {{Bar}} and the string &quot;My name&quot; are both 7 characters long,</span><br/><span class="hl-1">    </span><span class="hl-6">// the replacement keeps the trailing &quot; is Foo.&quot; from the previous call.</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// So, the final output is:</span><br/><span class="hl-1">    </span><span class="hl-6">// =&gt; {{Foo|1={{Bar|1=bar}} is Foo.}}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">newContent</span><span class="hl-1">); </span><span class="hl-6">// {{Foo|1={{Bar|1=bar}} is Foo.}}</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-6">// Showcase 2: Demonstrating parent-child template modification with context awareness</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">text</span><span class="hl-1"> = </span><span class="hl-2">&#39;{{Foo|1={{Bar}}}}&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">wikitext</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-0">Wikitext</span><span class="hl-1">(</span><span class="hl-4">text</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">newContent</span><span class="hl-1"> = </span><span class="hl-4">wikitext</span><span class="hl-1">.</span><span class="hl-0">modifyTemplates</span><span class="hl-1">((</span><span class="hl-4">temp</span><span class="hl-1">, </span><span class="hl-4">i</span><span class="hl-1">, </span><span class="hl-4">_arr</span><span class="hl-1">, </span><span class="hl-4">context</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">i</span><span class="hl-1"> === </span><span class="hl-9">0</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> (</span><span class="hl-4">temp</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-8">ParsedTemplate</span><span class="hl-1">).</span><span class="hl-0">insertParam</span><span class="hl-1">(</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;My name is Foo.&#39;</span><span class="hl-1">).</span><span class="hl-0">stringify</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">// This modifies the outer {{Foo}} template by replacing its first parameter value.</span><br/><span class="hl-1">    </span><span class="hl-6">// The original value `{{Bar}}` is entirely replaced with the string &quot;My name is Foo.&quot;</span><br/><span class="hl-1">    </span><span class="hl-6">// =&gt; {{Foo|1=My name is Foo.}}</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// As a result, the inner {{Bar}} is no longer present in the final wikitext.</span><br/><span class="hl-1">    </span><span class="hl-6">// Therefore, there&#39;s no point in modifying {{Bar}} separately.</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Only modify {{Bar}} if it was not overwritten by its parent.</span><br/><span class="hl-1">  </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">touched</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> (</span><span class="hl-4">temp</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-8">ParsedTemplate</span><span class="hl-1">).</span><span class="hl-0">insertParam</span><span class="hl-1">(</span><span class="hl-2">&#39;1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;bar&#39;</span><span class="hl-1">).</span><span class="hl-0">stringify</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">// This would modify {{Bar}} into {{Bar|1=bar}}, but in this case it won&#39;t happen,</span><br/><span class="hl-1">    </span><span class="hl-6">// because the parent {{Foo}} was already modified and discarded the original {{Bar}}.</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1">; </span><span class="hl-6">// No change</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">newContent</span><span class="hl-1">); </span><span class="hl-6">// Output: {{Foo|1=My name is Foo.}}</span>
</code><button type="button">Copy</button></pre>

</details>
</details>
<h2 id="other-classes-and-accessors" class="tsd-anchor-link">Other classes and accessors<a href="#other-classes-and-accessors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="mwbottitle" class="tsd-anchor-link">mwbot.Title<a href="#mwbottitle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A class that parses MediaWiki page titles into an object structure, adapted and expanded from the native <a href="https://doc.wikimedia.org/mediawiki-core/master/js/mw.Title.html"><code>mediawiki.Title</code></a> module.</p>
<p>This extended class is accessible via <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#title">mwbot.Title</a> (an instance member), and provides support for parsing interwiki titles ‚Äî a feature exclusive to <code>mwbot-ts</code>.</p>
<h3 id="mwbotconfig" class="tsd-anchor-link">mwbot.config<a href="#mwbotconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Mirrors the native <a href="https://www.mediawiki.org/wiki/Manual:Interface/JavaScript#mw.config"><code>mw.config</code></a>, which provides access to MediaWiki's <code>wg</code>-configuration variables. While site and user information initialized by <code>Mwbot.init</code> can be accessed via <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#info"><code>mwbot.info</code></a>, <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#config"><code>mwbot.config</code></a> further simplifies handling this data by relieving clients of the burden of normalizing the relevant objects.</p>
<details>
<summary>Example usage of <code>mwbot.config</code></summary>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">config</span><span class="hl-1"> = </span><span class="hl-4">mwbot</span><span class="hl-1">.</span><span class="hl-4">config</span><span class="hl-1">;</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;wgFormattedNamespaces&#39;</span><span class="hl-1">));</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">config</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;wgUserRights&#39;</span><span class="hl-1">)); </span><span class="hl-6">// This key is exclusive to mwbot-ts</span>
</code><button type="button">Copy</button></pre>

</details>
<p>See <a href="https://dr4goniez.github.io/mwbot-ts/interfaces/Mwbot.ConfigData.html">ConfigData</a> for available keys.</p>
<h3 id="mwbotutil" class="tsd-anchor-link">Mwbot.Util<a href="#mwbotutil" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A class that exports the framework's internal utility functions for use by the client, accessible via <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#util"><code>Mwbot.Util</code></a> (a static member).</p>
<p>This class should not be confused with the native <a href="https://doc.wikimedia.org/mediawiki-core/master/js/module-mediawiki.util.html"><code>mediawiki.util</code></a> module. Note that <code>mwbot-ts</code> uses the npm package <a href="https://www.npmjs.com/package/ip-wiki?activeTab=readme"><code>ip-wiki</code></a> for IP string normalization. <code>Mwbot.Util</code> does not handle this on its own. Since the package is registered as a dependency, you do not need to install it separately; you can directly require or import <code>ip-wiki</code> for manipulating IP and CIDR addresses.</p>
<h3 id="mwbotstring" class="tsd-anchor-link">Mwbot.String<a href="#mwbotstring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A class that provides functions for string manipulation, accessible via <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#string"><code>Mwbot.String</code></a> (a static member). It is a copy of the native <a href="https://doc.wikimedia.org/mediawiki-core/master/js/module-mediawiki.String.html"><code>mediawiki.String</code></a> module, included to support the functionality of <code>mwbot.Title</code>.</p>
<h3 id="template-related-classes" class="tsd-anchor-link">Template-related classes<a href="#template-related-classes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>{{double-braced}}</code> wiki markups can be constructed as objects using <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#template"><code>mwbot.Template</code></a> and <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#parserfunction"><code>mwbot.ParserFunction</code></a>, which are lazy-loaded instance members.</p>
<ul>
<li><code>mwbot.Template</code>: Parses <code>{{template}}</code> markups into an object structure.</li>
<li><code>mwbot.ParserFunction</code>: Parses <code>{{#function}}</code> markups into an object structure.</li>
</ul>
<h3 id="wikilink-related-classes" class="tsd-anchor-link">Wikilink-related classes<a href="#wikilink-related-classes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>[[double-bracketed]]</code> wiki markups can be constructed as objects using <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#wikilink"><code>mwbot.Wikilink</code></a> and <a href="https://dr4goniez.github.io/mwbot-ts/classes/Mwbot.Mwbot.html#filewikilink"><code>mwbot.FileWikilink</code></a>, which are lazy-loaded instance members.</p>
<ul>
<li><code>mwbot.Wikilink</code>: Parses non-file <code>[[wikilink]]</code> markups into an object structure.</li>
<li><code>mwbot.FileWikilink</code>: Parses file <code>[[wikilink]]</code> markups into an object structure.</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#mwbot-ts"><span>mwbot-<wbr/>ts</span></a><ul><li><a href="#the-core-class"><span>The core class</span></a></li><li><ul><li><a href="#create-an-instance"><span>Create an instance</span></a></li><li><a href="#request-methods"><span>Request methods</span></a></li><li><ul><li><a href="#basic-request-methods"><span>Basic request methods</span></a></li><li><a href="#utility-request-methods"><span>Utility request methods</span></a></li><li><a href="#token-related-methods"><span>Token-<wbr/>related methods</span></a></li><li><a href="#edit-related-methods"><span>Edit-<wbr/>related methods</span></a></li><li><a href="#other-utility-methods"><span>Other <wbr/>Utility <wbr/>Methods</span></a></li></ul></li><li><a href="#extend-the-class"><span>Extend the <wbr/>Class</span></a></li></ul></li><li><a href="#error-handling"><span>Error handling</span></a></li><li><a href="#wikitext-parser"><span>Wikitext parser</span></a></li><li><a href="#other-classes-and-accessors"><span>Other classes and accessors</span></a></li><li><ul><li><a href="#mwbottitle"><span>mwbot.<wbr/>Title</span></a></li><li><a href="#mwbotconfig"><span>mwbot.config</span></a></li><li><a href="#mwbotutil"><span>Mwbot.<wbr/>Util</span></a></li><li><a href="#mwbotstring"><span>Mwbot.<wbr/>String</span></a></li><li><a href="#template-related-classes"><span>Template-<wbr/>related classes</span></a></li><li><a href="#wikilink-related-classes"><span>Wikilink-<wbr/>related classes</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">mwbot-ts - v1.2.6</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
